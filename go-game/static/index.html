<head>
<link href="simple.css" type="text/css" rel="stylesheet" />
</head>
<body>
  <form id="send-cards" class="form-inline">
    <div class="form-group">
      <input id="input-card" type="text" class="form-control" placeholder="Card" autofocus />
    </div>
    <div class="form-group">
      <input id="input-num-cards" type="text" class="form-control" placeholder="# of cards" autofocus />
    </div>
    <button class="btn btn-primary" type="submit">Send</button>
  </form>
<div id="something">
  <button id="Add">Press me!</button>
</div>
<script src="jquery-2.1.3.js"></script>

<script type="text/javascript">
function WebSocketTest()
{
  if ("WebSocket" in window)
  {
     $('<p>Websocket connection opened</p>').appendTo('#something');
     // Let us open a web socket
     var ws = new WebSocket("ws://localhost:9999/echo");
     ws.onmessage = function (evt) 
     { 
       var received_msg = evt.data;
       $('<p>' + received_msg + '</p>').appendTo('#something');
     };
     ws.onclose = function()
     { 
       $('<p>Websocket connection closed</p>').appendTo('#something');
     };

     <!-- Send a websockets message on click -->
     $(function () {
       $('#Add').on('click', function () {
       ws.send("Message body");
       });
     });

     <!-- Make the form work -->
     $("#send-cards").on("submit", function(event) {
       event.preventDefault();
       var card = $("#input-card")[0].value;
       var num_cards   = $("#input-num-cards")[0].value;
       ws.send(JSON.stringify({ card: card, num_cards: num_cards }));
       $("#input-text")[0].value = "";
     });   
  }
  else
  {
     // The browser doesn't support WebSocket
     alert("WebSocket NOT supported by your Browser!");
  }
}
WebSocketTest();

</script>
</body>
